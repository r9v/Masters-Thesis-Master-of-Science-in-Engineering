xbarp=(1/8).*(8.*xp+(-3).*(qp(3)+qp(4)).*sin(q(4)+q(3))+(-1).*(qp(3)+qp(4)+qp(5)).*sin( ...
  q(4)+q(5)+q(3)));
ybarp=(1/8).*(8.*yp+3.*(qp(3)+qp(4)).*cos(q(4)+q(3))+(qp(3)+qp(4)+qp(5)).*cos(q(4)+q(5)+q(3))) ...
  ;
